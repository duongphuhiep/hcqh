<!--
Display a list of files given by API server
-->
<dom-module id="file-browser">
	<template>
		<!--<div id="container" class="grid js-masonry" data-masonry-options='{ "itemSelector": ".grid-item" }'>-->
		<div id="container" class="grid">
			<paper-card class="grid-item" heading="Upload">
				<file-upload id="fileUpload" droppable="true" raised="true" multi="true">Choose File</file-upload>
			</paper-card>

			<template is="dom-repeat" items={{files}}>
				<file-item class="grid-item" file-name={{item}}></file-item>
			</template>
		</div>


<!--
		<style is="custom-style">
			paper-card {
				max-width: 300px;
				margin:5px;
			}
			.horizontal-section-container {
				@apply(&#45;&#45;layout-horizontal);
				@apply(&#45;&#45;layout-center-justified);
				@apply(&#45;&#45;layout-wrap);
			}
		</style>
-->
	</template>
	<script>
		Polymer({
			is: 'file-browser',
			ready: function () {
				this.files = [
					"Vae, primus axona.png",
					"Racanas observare.png",
					"Nunquam dignus era",
					"Nunquam locus medicina",
					"Nunquam gratia urbs",
					"Nunquam demitto abnoba"
				];

			},
			listeners: {
				"fileUpload.before-upload": "updateLayout",
				"fileUpload.cancel-upload": "updateLayout"
			},
			attached: function () {
				this.masonry = new Masonry(this.$.container, {"itemSelector": ".grid-item"});
				this.masonry.layout();
			},
			properties: {
				url: String
			},
			updateLayout: function() {
				this.debounce("updateLayout",function() {
					console.log(this.$.container.masonry);
					this.masonry.layout();
				} ,100);
			}
		});
	</script>

</dom-module>
