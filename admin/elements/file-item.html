<!--
Display a list of files given by API server
TODO: DRY, remove startsWith, endsWith, use the function in the post folder
-->
<dom-module id="file-item">
	<template>
		<paper-card>
			<div class="card-content">{{fileName}}</div>
			<template is="dom-if" if="{{hasAction(deletable, renamable)}}">
				<div class="card-actions">
					<template is="dom-if" if={{deletable}}>
						<paper-icon-button id="delete" icon="icons:clear" alt="Delete"></paper-icon-button>
						<paper-tooltip for="delete">Delete</paper-tooltip>
					</template>
					<template is="dom-if" if={{renamable}}>
						<paper-icon-button id="rename" icon="icons:text-format" alt="Rename"></paper-icon-button>
						<paper-tooltip for="rename">Rename</paper-tooltip>
					</template>
				</div>
			</template>
		</paper-card>

		<style is="custom-style">
			paper-card {
				max-width: 300px;
				margin:5px;
				vertical-align: top;
				cursor: pointer;
			}

			paper-card:hover {
				@apply(--shadow-elevation-8dp);
			}

			paper-icon-button {
				color: var(--secondary-text-color);
			}
			paper-icon-button:hover {
				color: var(--primary-text-color);
			}
		</style>
	</template>
	<script>
		Polymer({
			is: 'file-item',

			ready: function() {
				if (this.contentType === "post-item") {
					this.renamable = "vi.md" !== this.fileName;
					this.deletable = "vi.md" !== this.fileName;
					if (app.helper.isMarkdown(this.fileName)) {
						this.style["font-size"] = "20px";
					}
				}
			},

			properties: {
				fileName: String,
				parentPath: String,
				/*fileName: {
					type: String,
					reflectToAttribute: true
				},*/
				deletable: {
					type: Boolean,
					value: true
				},
				renamable: {
					type: Boolean,
					value: true
				},
				/**
				 * possible value "post-item" or "post-folder"
				 * "post-item" is used in the detail view
				 * "post-folder" is use in the drawer view
				 */
				contentType: String
			},
			hasAction: function(deletable, renamable){
				return deletable || renamable;
				return true;
			}
	});
	</script>
</dom-module>
